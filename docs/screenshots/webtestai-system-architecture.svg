<svg viewBox="0 0 1200 900" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景 -->
  <rect width="1200" height="900" fill="#f0f4f8"/>
  
  <!-- タイトル -->
  <text x="600" y="40" font-size="26" font-weight="bold" text-anchor="middle" fill="#1a1a2e">
    WebTestAI システムアーキテクチャ
  </text>
  
  <!-- コマンドライン層 -->
  <g id="cli-layer">
    <rect x="50" y="80" width="1100" height="100" rx="10" fill="#16213e" stroke="#0f3460" stroke-width="2"/>
    <text x="600" y="110" text-anchor="middle" fill="white" font-size="18" font-weight="bold">コマンドライン インターフェース</text>
    
    <!-- コマンド一覧 -->
    <rect x="80" y="125" width="100" height="40" rx="5" fill="#e94560"/>
    <text x="130" y="150" text-anchor="middle" fill="white" font-size="14">./web-test</text>
    
    <rect x="200" y="125" width="80" height="40" rx="5" fill="#0f3460"/>
    <text x="240" y="150" text-anchor="middle" fill="white" font-size="12">auto</text>
    
    <rect x="300" y="125" width="80" height="40" rx="5" fill="#0f3460"/>
    <text x="340" y="150" text-anchor="middle" fill="white" font-size="12">record</text>
    
    <rect x="400" y="125" width="80" height="40" rx="5" fill="#0f3460"/>
    <text x="440" y="150" text-anchor="middle" fill="white" font-size="12">play</text>
    
    <rect x="500" y="125" width="80" height="40" rx="5" fill="#0f3460"/>
    <text x="540" y="150" text-anchor="middle" fill="white" font-size="12">run</text>
    
    <rect x="600" y="125" width="80" height="40" rx="5" fill="#0f3460"/>
    <text x="640" y="150" text-anchor="middle" fill="white" font-size="12">cases</text>
    
    <rect x="700" y="125" width="80" height="40" rx="5" fill="#0f3460"/>
    <text x="740" y="150" text-anchor="middle" fill="white" font-size="12">export</text>
    
    <rect x="800" y="125" width="80" height="40" rx="5" fill="#0f3460"/>
    <text x="840" y="150" text-anchor="middle" fill="white" font-size="12">switch</text>
    
    <rect x="900" y="125" width="80" height="40" rx="5" fill="#0f3460"/>
    <text x="940" y="150" text-anchor="middle" fill="white" font-size="12">config</text>
    
    <rect x="1000" y="125" width="80" height="40" rx="5" fill="#0f3460"/>
    <text x="1040" y="150" text-anchor="middle" fill="white" font-size="12">help</text>
  </g>
  
  <!-- AI CLIレイヤー -->
  <g id="ai-layer">
    <rect x="50" y="210" width="530" height="120" rx="10" fill="#533483" stroke="#3c1361" stroke-width="2"/>
    <text x="315" y="240" text-anchor="middle" fill="white" font-size="18" font-weight="bold">AI CLIレイヤー</text>
    
    <rect x="80" y="260" width="200" height="50" rx="8" fill="#764ba2"/>
    <text x="180" y="290" text-anchor="middle" fill="white" font-size="14">Gemini CLI</text>
    
    <rect x="320" y="260" width="200" height="50" rx="8" fill="#f093fb"/>
    <text x="420" y="290" text-anchor="middle" fill="white" font-size="14">Claude Code CLI</text>
    
    <!-- 切り替え矢印 -->
    <path d="M 280 285 L 320 285" stroke="white" stroke-width="2" fill="none"/>
    <path d="M 320 285 L 280 285" stroke="white" stroke-width="2" fill="none"/>
    <text x="300" y="280" text-anchor="middle" fill="white" font-size="10">切り替え</text>
  </g>
  
  <!-- ブラウザ自動化レイヤー -->
  <g id="browser-layer">
    <rect x="620" y="210" width="530" height="120" rx="10" fill="#ff6b6b" stroke="#c92a2a" stroke-width="2"/>
    <text x="885" y="240" text-anchor="middle" fill="white" font-size="18" font-weight="bold">ブラウザ自動化レイヤー</text>
    
    <rect x="700" y="260" width="350" height="50" rx="8" fill="#fa5252"/>
    <text x="875" y="290" text-anchor="middle" fill="white" font-size="14">Playwright</text>
  </g>
  
  <!-- コアモジュール層 -->
  <g id="core-modules">
    <rect x="50" y="360" width="1100" height="280" rx="10" fill="#e9ecef" stroke="#adb5bd" stroke-width="2"/>
    <text x="600" y="390" text-anchor="middle" fill="#212529" font-size="20" font-weight="bold">コアモジュール (src/)</text>
    
    <!-- モジュール群 -->
    <g transform="translate(80, 410)">
      <rect width="200" height="80" rx="8" fill="#087f5b" stroke="#099268" stroke-width="2"/>
      <text x="100" y="25" text-anchor="middle" fill="white" font-size="13" font-weight="bold">test-runner.js</text>
      <text x="100" y="45" text-anchor="middle" fill="white" font-size="11">テスト実行エンジン</text>
      <text x="100" y="60" text-anchor="middle" fill="white" font-size="10">・並列実行</text>
      <text x="100" y="73" text-anchor="middle" fill="white" font-size="10">・結果収集</text>
    </g>
    
    <g transform="translate(300, 410)">
      <rect width="200" height="80" rx="8" fill="#1864ab" stroke="#1971c2" stroke-width="2"/>
      <text x="100" y="25" text-anchor="middle" fill="white" font-size="12" font-weight="bold">test-case-auto</text>
      <text x="100" y="40" text-anchor="middle" fill="white" font-size="12" font-weight="bold">-generator.js</text>
      <text x="100" y="60" text-anchor="middle" fill="white" font-size="10">AI自動生成エンジン</text>
      <text x="100" y="73" text-anchor="middle" fill="white" font-size="10">最大50テスト生成</text>
    </g>
    
    <g transform="translate(520, 410)">
      <rect width="200" height="80" rx="8" fill="#5f3dc4" stroke="#6741d9" stroke-width="2"/>
      <text x="100" y="25" text-anchor="middle" fill="white" font-size="12" font-weight="bold">visual-element</text>
      <text x="100" y="40" text-anchor="middle" fill="white" font-size="12" font-weight="bold">-collector.js</text>
      <text x="100" y="60" text-anchor="middle" fill="white" font-size="10">可視要素収集</text>
      <text x="100" y="73" text-anchor="middle" fill="white" font-size="10">座標順解析</text>
    </g>
    
    <g transform="translate(740, 410)">
      <rect width="200" height="80" rx="8" fill="#c2255c" stroke="#e64980" stroke-width="2"/>
      <text x="100" y="25" text-anchor="middle" fill="white" font-size="12" font-weight="bold">comprehensive-test</text>
      <text x="100" y="40" text-anchor="middle" fill="white" font-size="12" font-weight="bold">-generator.js</text>
      <text x="100" y="60" text-anchor="middle" fill="white" font-size="10">包括的テスト生成</text>
      <text x="100" y="73" text-anchor="middle" fill="white" font-size="10">正常系・異常系</text>
    </g>
    
    <g transform="translate(960, 410)">
      <rect width="160" height="80" rx="8" fill="#e67700" stroke="#f08c00" stroke-width="2"/>
      <text x="80" y="25" text-anchor="middle" fill="white" font-size="12" font-weight="bold">test-case</text>
      <text x="80" y="40" text-anchor="middle" fill="white" font-size="12" font-weight="bold">-recorder.js</text>
      <text x="80" y="60" text-anchor="middle" fill="white" font-size="10">操作録画</text>
      <text x="80" y="73" text-anchor="middle" fill="white" font-size="10">再生機能</text>
    </g>
    
    <g transform="translate(190, 510)">
      <rect width="200" height="80" rx="8" fill="#66d9e8" stroke="#3bc9db" stroke-width="2"/>
      <text x="100" y="25" text-anchor="middle" fill="#212529" font-size="12" font-weight="bold">ai-test-prompts.js</text>
      <text x="100" y="45" text-anchor="middle" fill="#212529" font-size="11">AIプロンプト定義</text>
      <text x="100" y="60" text-anchor="middle" fill="#212529" font-size="10">・テスト生成指示</text>
      <text x="100" y="73" text-anchor="middle" fill="#212529" font-size="10">・コンテキスト理解</text>
    </g>
    
    <g transform="translate(410, 510)">
      <rect width="200" height="80" rx="8" fill="#ffd43b" stroke="#fab005" stroke-width="2"/>
      <text x="100" y="25" text-anchor="middle" fill="#212529" font-size="12" font-weight="bold">security-test</text>
      <text x="100" y="40" text-anchor="middle" fill="#212529" font-size="12" font-weight="bold">-generator.js</text>
      <text x="100" y="60" text-anchor="middle" fill="#212529" font-size="10">・XSSテスト</text>
      <text x="100" y="73" text-anchor="middle" fill="#212529" font-size="10">・SQLインジェクション</text>
    </g>
    
    <g transform="translate(630, 510)">
      <rect width="200" height="80" rx="8" fill="#63e6be" stroke="#38d9a9" stroke-width="2"/>
      <text x="100" y="25" text-anchor="middle" fill="#212529" font-size="12" font-weight="bold">form-analyzer.js</text>
      <text x="100" y="45" text-anchor="middle" fill="#212529" font-size="11">フォーム解析</text>
      <text x="100" y="60" text-anchor="middle" fill="#212529" font-size="10">・意図検出</text>
      <text x="100" y="73" text-anchor="middle" fill="#212529" font-size="10">・データ生成</text>
    </g>
    
    <g transform="translate(850, 510)">
      <rect width="200" height="80" rx="8" fill="#91a7ff" stroke="#748ffc" stroke-width="2"/>
      <text x="100" y="25" text-anchor="middle" fill="#212529" font-size="12" font-weight="bold">session-manager.js</text>
      <text x="100" y="45" text-anchor="middle" fill="#212529" font-size="11">セッション管理</text>
      <text x="100" y="60" text-anchor="middle" fill="#212529" font-size="10">・ログイン維持</text>
      <text x="100" y="73" text-anchor="middle" fill="#212529" font-size="10">・Cookie管理</text>
    </g>
  </g>
  
  <!-- データ層 -->
  <g id="data-layer">
    <rect x="50" y="670" width="1100" height="200" rx="10" fill="#495057" stroke="#343a40" stroke-width="2"/>
    <text x="600" y="700" text-anchor="middle" fill="white" font-size="20" font-weight="bold">データ層</text>
    
    <!-- config/ -->
    <g transform="translate(100, 720)">
      <rect width="240" height="120" rx="8" fill="#868e96"/>
      <text x="120" y="25" text-anchor="middle" fill="white" font-size="14" font-weight="bold">config/</text>
      <text x="120" y="45" text-anchor="middle" fill="white" font-size="11">・settings.json</text>
      <text x="120" y="60" text-anchor="middle" fill="white" font-size="11">・test-cases.json</text>
      <text x="120" y="75" text-anchor="middle" fill="white" font-size="11">・test-cases-backup-*.json</text>
      <text x="120" y="90" text-anchor="middle" fill="white" font-size="11">・auth-state.json</text>
    </g>
    
    <!-- recordings/ -->
    <g transform="translate(380, 720)">
      <rect width="240" height="120" rx="8" fill="#868e96"/>
      <text x="120" y="25" text-anchor="middle" fill="white" font-size="14" font-weight="bold">recordings/</text>
      <text x="120" y="45" text-anchor="middle" fill="white" font-size="11">・操作記録 (*.json)</text>
      <text x="120" y="60" text-anchor="middle" fill="white" font-size="11">・動画ファイル (*.webm)</text>
      <text x="120" y="75" text-anchor="middle" fill="white" font-size="11">・タイムスタンプ付き</text>
      <text x="120" y="90" text-anchor="middle" fill="white" font-size="11">・自動整理</text>
    </g>
    
    <!-- reports/ -->
    <g transform="translate(660, 720)">
      <rect width="240" height="120" rx="8" fill="#868e96"/>
      <text x="120" y="25" text-anchor="middle" fill="white" font-size="14" font-weight="bold">reports/</text>
      <text x="120" y="45" text-anchor="middle" fill="white" font-size="11">・テスト結果レポート</text>
      <text x="120" y="60" text-anchor="middle" fill="white" font-size="11">・スクリーンショット</text>
      <text x="120" y="75" text-anchor="middle" fill="white" font-size="11">・エラーログ</text>
      <text x="120" y="90" text-anchor="middle" fill="white" font-size="11">・統計情報</text>
    </g>
    
    <!-- node_modules/ -->
    <g transform="translate(940, 720)">
      <rect width="180" height="120" rx="8" fill="#868e96"/>
      <text x="90" y="25" text-anchor="middle" fill="white" font-size="14" font-weight="bold">依存関係</text>
      <text x="90" y="45" text-anchor="middle" fill="white" font-size="11">・playwright</text>
      <text x="90" y="60" text-anchor="middle" fill="white" font-size="11">・その他npm</text>
      <text x="90" y="75" text-anchor="middle" fill="white" font-size="11">・パッケージ</text>
    </g>
  </g>
  
  <!-- 接続線 -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#495057"/>
    </marker>
  </defs>
  
  <!-- CLI → AI/Browser -->
  <path d="M 315 180 L 315 210" stroke="#495057" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <path d="M 885 180 L 885 210" stroke="#495057" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- AI/Browser → Core -->
  <path d="M 315 330 L 315 360" stroke="#495057" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <path d="M 885 330 L 885 360" stroke="#495057" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Core → Data -->
  <path d="M 300 640 L 300 670" stroke="#495057" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <path d="M 600 640 L 600 670" stroke="#495057" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <path d="M 900 640 L 900 670" stroke="#495057" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
</svg>